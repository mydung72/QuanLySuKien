@*
    Layout tổng cho phần Admin
    File này sẽ dùng cho toàn bộ các trang trong thư mục Views/Admin/
*@
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Admin Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true" />
</head>
<body>
    <div class="admin-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="/lib/avatar.png" alt="Admin" class="profile-img" onerror="this.src='https://ui-avatars.com/api/?name=Admin&background=random'">
                <h4>Administrator</h4>
                <small>Quản trị viên</small>
            </div>

            <ul class="sidebar-menu">
                <li><a asp-controller="Admin" asp-action="Dashboard" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Admin" && ViewContext.RouteData.Values["action"]?.ToString() == "Dashboard" ? "active" : "")"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
                
                <div class="menu-label">Quản lý</div>
                <li><a asp-controller="EventManagement" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "EventManagement" ? "active" : "")"><i class="bi bi-calendar-event"></i> Sự kiện</a></li>
                <li><a asp-controller="BookingManagement" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "BookingManagement" ? "active" : "")"><i class="bi bi-ticket-perforated"></i> Đặt chỗ</a></li>
                <li><a asp-controller="UserManagement" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "UserManagement" ? "active" : "")"><i class="bi bi-people"></i> Người dùng</a></li>
                <li><a asp-controller="CategoryManagement" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "CategoryManagement" ? "active" : "")"><i class="bi bi-tags"></i> Danh mục</a></li>

                <div class="menu-label">Truyền thông</div>
                <li><a asp-controller="Media" asp-action="News" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Media" && ViewContext.RouteData.Values["action"]?.ToString()?.Contains("News") == true ? "active" : "")"><i class="bi bi-newspaper"></i> Tin tức</a></li>
                <li><a asp-controller="Media" asp-action="Banners" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Media" && ViewContext.RouteData.Values["action"]?.ToString()?.Contains("Banner") == true ? "active" : "")"><i class="bi bi-image"></i> Banner</a></li>

                <div class="menu-label">Báo cáo</div>
                <li><a asp-controller="Report" asp-action="Revenue" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Report" && ViewContext.RouteData.Values["action"]?.ToString() == "Revenue" ? "active" : "")"><i class="bi bi-graph-up"></i> Doanh thu</a></li>
                <li><a asp-controller="Report" asp-action="Attendance" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Report" && ViewContext.RouteData.Values["action"]?.ToString() == "Attendance" ? "active" : "")"><i class="bi bi-person-check"></i> Tham dự</a></li>
                <li><a asp-controller="Report" asp-action="PopularEvents" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Report" && ViewContext.RouteData.Values["action"]?.ToString() == "PopularEvents" ? "active" : "")"><i class="bi bi-fire"></i> Sự kiện hot</a></li>

                <div class="menu-divider"></div>
                <li><a asp-controller="Account" asp-action="Logout"><i class="bi bi-box-arrow-left"></i> Đăng xuất</a></li>
            </ul>
        </aside>

        <!-- Main content -->
        <main class="main-content">
            <header class="admin-header">
                <h2>@ViewData["Title"]</h2>
                <div class="d-flex align-items-center gap-3">
                    <span class="text-muted small">@DateTime.Now.ToString("dddd, dd/MM/yyyy")</span>
                </div>
            </header>

            <section class="content">
                @if (TempData["Success"] != null)
                {
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <i class="bi bi-check-circle me-2"></i>@TempData["Success"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }
                @if (TempData["Error"] != null)
                {
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        <i class="bi bi-exclamation-circle me-2"></i>@TempData["Error"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }
                @RenderBody()
            </section>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
